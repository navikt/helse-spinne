sudo: required
language: java
services:
- docker
before_install:
- openssl aes-256-cbc -K $encrypted_2af4956177a6_key -iv $encrypted_2af4956177a6_iv -in ./travis/helseci.2018-10-26.private-key.pem.enc -out ./travis/helseci.2018-10-26.private-key.pem -d
- git clone https://github.com/navikt/github-apps-support.git
- export PATH=`pwd`/github-apps-support/bin:$PATH
- export INSTALLATION_TOKEN=$(generate-installation-token.sh `generate-jwt.sh ./travis/helseci.2018-10-26.private-key.pem
  $GITHUB_APP_ID`)
script:
- make bump-version
- make
after_success:
- echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin
- git config user.name team-helse[bot]
- git config user.email team-helse[bot]@users.noreply.github.com
- "./travis/deploy.sh"
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
  - secure: BBmfhm53pmJr01ZiFPFlkY8HEApzVx13q6WLIg2OjMTYM3isQUFLyevVaVKJIoFd+EuK+s7IVymscIGHZRx6kU1i5hbv6md5kzOPjz0l8n7xDB4XSstIkVeu5+YOEr2CCi9DzD5dkyV2uZjN6QAAc4/D5DEhxSLLWnZRs8QyswiVE/rBRmufJTsAt687oetZWcEpMwlgykb5eR8q4zqQha3NwiyBBz+fN0mDaeVC/zlNseJV6u7bRYoaTaVrpDi2gsw2I+fQkd7CDob94Q5EXUECWompPUzmVd5zjfVi7ZioiE3ujmAv5H8jhdNOCjxL3zEC+dfFerkxAIbkAWbRB0NmfMWofH2nJUAeuSpMt1Uk6EwqNuYXMkoupFum+s1HlzB/UVAtIYuZasqvOR40R3ketQTJb+Ngxa3eKZEuwQ1j8IuX18+UBiBxDujkKLjdT2nAZ1sC5Q8jv9S8DY4cdgGuyljve5JzeVXnqmOJ3xe3xZ5F3ivlKA7Tg8UCtSgKZSTMixhQ98H3hOpNh7bKe1GbwzA+ntnBTvhbhxEaJDqmb4+FyUNpKmRG5qq+9sFdXg5Fn25MWxnKNzM6J+zPDTVdTz+NklLN8SEu65LdVmWGUtWGxDdB0UE8hA7uiObiCRSs2bBVSBZVjcr08QYVt2zhaUnme0kULVlwaAxoNfc=
  - secure: ojFHEUkpO59km29NJwu0NOJfR9h4llv81YDr95vwsCu5o99JpK5IgFb3q0FlaLyYEQFNbFe0ImBG7KwBZAooh5Wcjl1+iTTB6ljs1NORGDhcf0vTGSlNvMBXuHyS2cdyvlpdoCkTMgBkCMuEK0/KafF0toEEzIl/yCveqtMG29TB3FSLtr6Ks5N8XliZDIROw3rJK47S/5m8hB+o4HfaYvUWFvNaWwFyPxkZbxG6ExVxcU6lT54QAifzMUq5Yla0pUixeJa0Reru8TCKxRS59GCQ6i+hJeVUXS6V7zrjvA6djv8bi8IKCti3Mv3PDOJamIDPb7MfcNsx9NkGmHcJk7Q7+AR+vHOa1tG/a5Ks4OEwn9A+tqE/Xc9r9OTYxU79rrChyT3bDuh7Tg2GtHmN6dgdw27QGDIOE+V2v/JGsVnDNRTgjH+xWI/+qYcEmedgqvwC37A+ghd3hKy4RkyF9Oy3kPU5SQqjUUNU0kdg6bnU71hs39oKNacvxFQt8fBr+KFBlCVoObnqH44iJWnF72Cy9nLqUfdagaaBppBOqIYCDrNWUNw3ptFoHV7xJubgwMV3ke2i1EGmUpf0Ml+y7Knz2hD+1Q5QUg82SCNH0AFT8Z0bD51JJ8G1cFpaMeS820j4t9/eNIvWxxqvyvalB++c7L9V1QkwmaHKD7yaD+M=
  - secure: EpJbgQMGxkBJnR5jS4SKQ+S5MR0/qmGelb00YsGDHyMuKNOqRboyrOJDJ285htQOlGbVadVSWhftjASAtLa+0WIG/P7xGV6b63l62h+y+3FOdnF0oZHcuJnqEuNzDzgqSvriP0oSwXtFlk3xmjNaUQ+spfkoCITabAZp3uJZ9EfLaQUPTjY+S+7++GPGQcvKArrPK2cR4gmB8yHEHcDvmcCShzb0Mg/GdicA0cS3mVXV7GoLLRah3+buaE2n3iif1W06nB/s2da5PSDS9XZ5ww8RuBAvhZqad5NoqASbdVVrKmb52XXPh07Ykh4Uji6r6CywFtuTON0yQ1V2ldIqrWOl+8/8ihRMi/Z5pDzB8NQPkhYm0UeeUYV9ufrpmhnElcH6uXZF6HlXalgvY1ap2OgQO1EfjT1kqF4Ub7ADboW/8G6QhcPMIwCMZMr6AGpUZSsl/1+s+YDiCGIBwN0v1M27FHLiIi+PbkEScKPy8EA72X3Hrt2YdzgrwRJ2QshqNLHBo0BQt0RKJkQsGGERbj8Lbf1hv8tAOQPRBa2S979EBnLGTu3k0kOByJlYdFDq7uX3SwNGrgvbBmMEtLd3mFLNjotKg0bZDocrJL9atNORoBfOnjHpcwozNaYGuV2LvptfPeRMaUkgyN/ngrSn8V4Y7wfLZzc0c1vOs9B4jD0=
